{% load static %}

<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>map</title>
  <style>
    #mapwrap {
      position: relative;
      overflow: hidden;
    }

    .category,
    .category * {
      margin: 0;
      padding: 0;
      color: #000;
    }

    .category {
      position: absolute;
      overflow: hidden;
      top: 100px;
      right: 10px;
      border-radius: 5px;
      width: 351px;
      height: 70px;
      z-index: 10;
      border: 1px solid black;
      font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
      font-size: 12px;
      text-align: center;
      background-color: #fff;
    }

    .category .menu_selected {
      background: #FF5F4A;
      color: #fff;
      border-left: 1px solid #915B2F;
      border-right: 1px solid #915B2F;
      margin: 0 -1px;
    }

    .category li {
      list-style: none;
      float: left;
      width: 50px;
      height: 68px;
      padding-top: 5px;
      cursor: pointer;
    }

    .customoverlay {
      position: relative;
      bottom: 85px;
      border-radius: 6px;
      border: 1px solid #ccc;
      border-bottom: 2px solid #ddd;
      float: left;
    }

    .customoverlay:nth-of-type(n) {
      border: 0;
      box-shadow: 0px 1px 2px #888;
    }

    .customoverlay a {
      display: block;
      text-decoration: none;
      color: #000;
      text-align: center;
      border-radius: 6px;
      font-size: 14px;
      font-weight: bold;
      overflow: hidden;
      background: #d95050;
      background: #d95050 url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/arrow_white.png) no-repeat right 14px center;
    }

    .customoverlay .title {
      display: block;
      text-align: center;
      background: #fff;
      margin-right: 35px;
      padding: 10px 15px;
      font-size: 14px;
      font-weight: bold;
    }

    .customoverlay:after {
      content: '';
      position: absolute;
      margin-left: -12px;
      left: 50%;
      bottom: -12px;
      width: 22px;
      height: 12px;
      background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="stylesheet" href="{% static 'css/search.css' %}" />
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=28e76986d85ea1c811c0077d258e2cd5"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>

<body>
  <header>
    <a href="#" class="logo">Travel <span>.</span></a>
    <nav class="navbar">
      <ul>
        <li><a data-scroll="home" href="#home" class="active">í™ˆ</a></li>
        <li><a data-scroll="search" href="#search">ê²€ìƒ‰</a></li>
        <li><a data-scroll="mypage" href="#mypage">ë§ˆì´í˜ì´ì§€</a></li>
      </ul>
    </nav>
    <div class="fas fa-bars"></div>
  </header>

  <section>
    <div id="mapwrap">
      <!-- ì§€ë„ê°€ í‘œì‹œë  div -->
      <div id="map" style="width:100%;height: 700px;"></div>
      <!-- ì§€ë„ ìœ„ì— í‘œì‹œë  ë§ˆì»¤ ì¹´í…Œê³ ë¦¬ -->
      <div class="category">
        <ul>
          <li id="tourMenu" onclick="changeMarker('tour')">
            <span class="material-icons" style="font-size:40px;">tour</span>
            ê´€ê´‘ì§€
          </li>
          <li id="cultureMenu" onclick="changeMarker('culture')">
            <span class="material-icons" style="font-size:40px;">museum</span>
            ë¬¸í™”ì‹œì„¤
          </li>
          <li id="festivalMenu" onclick="changeMarker('festival')">
            <span class="material-icons" style="font-size:40px;">theater_comedy</span>
            ì¶•ì œê³µì—°í–‰ì‚¬
          </li>
          <li id="leportsMenu" onclick="changeMarker('leports')">
            <span class="material-icons" style="font-size:40px;">sports_handball</span>
            ë ˆí¬ì¸ 
          </li>
          <li id="stayMenu" onclick="changeMarker('stay')">
            <span class="material-icons" style="font-size:40px;">bedroom_parent</span>
            ìˆ™ë°•
          </li>
          <li id="shoppingMenu" onclick="changeMarker('shopping')">
            <span class="material-icons" style="font-size:40px;">card_giftcard</span>
            ì‡¼í•‘
          </li>
          <li id="restaurantMenu" onclick="changeMarker('restaurant')">
            <span class="material-icons" style="font-size:40px;">restaurant</span>
            ìŒì‹ì 
          </li>
        </ul>
      </div>
    </div>
  </section>


  <section>
    <!-- <div>
      {{contentid}}<br>
      {{mapx}}<br>
      {{mapy}}<br> 
      </div> -->
    <h1><a href="{% url 'index' %}">ë’¤ë¡œ</a></h1>
  </section>
  <script>
    // // ë§ˆì»¤ë¥¼ í´ë¦­í–ˆì„ ë•Œ í•´ë‹¹ ì¥ì†Œì˜ ìƒì„¸ì •ë³´ë¥¼ ë³´ì—¬ì¤„ ì»¤ìŠ¤í…€ì˜¤ë²„ë ˆì´ì…ë‹ˆë‹¤
    // var placeOverlay = new kakao.maps.CustomOverlay({zIndex:1}), 
    //     contentNode = document.createElement('div'), // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì˜ ì»¨í…ì¸  ì—˜ë¦¬ë¨¼íŠ¸ ì…ë‹ˆë‹¤ 
    //     markers = [], // ë§ˆì»¤ë¥¼ ë‹´ì„ ë°°ì—´ì…ë‹ˆë‹¤
    //     currCategory = ''; // í˜„ì¬ ì„ íƒëœ ì¹´í…Œê³ ë¦¬ë¥¼ ê°€ì§€ê³  ìˆì„ ë³€ìˆ˜ì…ë‹ˆë‹¤
    // const mapy = "{{mapy}}".replace(/&#x27;/g, "").replace(/\[/g, "").replace(/\]/g, "").split(',');
    // var mapy = "{{mapy}}";
    // var context = JSON.parse("{{context_json | escapejs}}")
    // console.log(JSON.stringify(context));
    // console.log(typeof context);
    // console.log(typeof 123123);
    // console.log(typeof "123123");

    // console.log(context.contentid);
    // console.log(context.contentid.length);

    // console.log(context.contentid[0]);

    // console.log([...Array(context.contentid.length).keys()]);

    // for ([index, contentItem] of context.contentid.entries()) {
    //   console.log("ğŸ " + "index:" + index + ", data: " + contentItem);
    // }
    // ìˆœì„œ
    // 1.ë°ì´í„° ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“ ë‹¤.
    // var gps_y = JSON.parse("{{context_json.mapy | escapejs}}");
    // var gps_x = JSON.parse("{{context_json.mapx | escapejs}}");
    // 2. ë°˜ë³µë¬¸ì„ ë§Œë“ ë‹¤. >> ì§‘ì–´ ë„£ëŠ”ë‹¤.
    // var loc_gps_code = [];
    // for (i of [...Array(context.contentid.length).keys()]) {
    //   // console.log(context.mapy[i], context.mapx[i])
    //   var y = context.mapy[i];
    //   var x = context.mapx[i];
    //   loc_gps_code.push(new kakao.maps.LatLng(y, x))
    // }
    // console.log(loc_gps_code);


    // for (mapItemX of mapy) {
    // console.log("ğŸ" + mapItemX);
    // }

    var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div  
      mapOption = {
        center: new kakao.maps.LatLng(37.498004414546934, 127.02770621963765), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ 
        // center: new kakao.maps.LatLng(context.loc[0], context.loc[1]), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ 
        level: 12 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨ 
      };

    var map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤


    // ê´€ê´‘ì§€ ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤
    var tourPositions = [];
    for (i of [...Array(context.tour_context.contentid.length).keys()]) {
      // console.log(context.mapy[i], context.mapx[i])
      var y = context.tour_context.mapy[i];
      var x = context.tour_context.mapx[i];
      tourPositions.push(new kakao.maps.LatLng(y, x))
    }

    // ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤
    var culturePositions = [];
    for (i of [...Array(context.culture_context.contentid.length).keys()]) {
      // console.log(context.mapy[i], context.mapx[i])
      var y = context.culture_context.mapy[i];
      var x = context.culture_context.mapx[i];
      culturePositions.push(new kakao.maps.LatLng(y, x))
    }

    // ì¶•ì œê³µì—° ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤
    var festivalPositions = [];
    for (i of [...Array(context.festival_context.contentid.length).keys()]) {
      // console.log(context.mapy[i], context.mapx[i])
      var y = context.festival_context.mapy[i];
      var x = context.festival_context.mapx[i];
      festivalPositions.push(new kakao.maps.LatLng(y, x))
    }

    // ë ˆí¬ì¸  ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤
    var leportsPositions = [];
    for (i of [...Array(context.leports_context.contentid.length).keys()]) {
      // console.log(context.mapy[i], context.mapx[i])
      var y = context.leports_context.mapy[i];
      var x = context.leports_context.mapx[i];
      leportsPositions.push(new kakao.maps.LatLng(y, x))
    }

    // ìˆ™ë°• ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤
    var stayPositions = [];
    for (i of [...Array(context.stay_context.contentid.length).keys()]) {
      var y = context.stay_context.mapy[i];
      var x = context.stay_context.mapx[i];
      stayPositions.push(new kakao.maps.LatLng(y, x))
    }

    // ì‡¼í•‘ ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤
    var shoppingPositions = [];
    for (i of [...Array(context.shopping_context.contentid.length).keys()]) {
      var y = context.shopping_context.mapy[i];
      var x = context.shopping_context.mapx[i];
      shoppingPositions.push(new kakao.maps.LatLng(y, x))
    }

    // ìŒì‹ì  ë§ˆì»¤ê°€ í‘œì‹œë  ì¢Œí‘œ ë°°ì—´ì…ë‹ˆë‹¤
    var restaurantPositions = [];
    for (i of [...Array(context.restaurant_context.contentid.length).keys()]) {
      var y = context.restaurant_context.mapy[i];
      var x = context.restaurant_context.mapx[i];
      restaurantPositions.push(new kakao.maps.LatLng(y, x))
    }


    // var imgUrl = "{% static 'img/outline_tour_black_36dp.png' %}";
    // console.log(`[*] ì´ë¯¸ì§€ ì£¼ì†Œ: ${imgUrl}`);
    var tourmarkerImageSrc = "{% static 'img/outline_tour_black_36dp.png' %}";
    var culturemarkerImageSrc = "{% static 'img/outline_museum_black_36dp.png' %}";
    var festivalmarkerImageSrc = "{% static 'img/outline_theater_comedy_black_36dp.png' %}";
    var leportsmarkerImageSrc = "{% static 'img/outline_sports_handball_black_36dp.png' %}";
    var staymarkerImageSrc = "{% static 'img/outline_bedroom_parent_black_36dp.png' %}";
    var shoppingmarkerImageSrc = "{% static 'img/outline_card_giftcard_black_36dp.png' %}";
    var restaurantmarkerImageSrc = "{% static 'img/outline_restaurant_black_36dp.png' %}";

    // var markerImageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/category.png';  // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì…ë‹ˆë‹¤. ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ ì…ë‹ˆë‹¤
    var tourMarkers = []; // ê´€ê´‘ì§€ ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
    tourOverlay = [], // ê´€ê´‘ì§€ ì˜¤ë²„ë ˆì´
      cultureMarkers = [], // ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
      cultureOverlay = [], // ë¬¸í™”ì‹œì„¤ ì˜¤ë²„ë ˆì´
      festivalMarkers = [], // ì¶•ì œê³µì—° ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
      festivalOverlay = [], // ì¶•ì œê³µì—° ì˜¤ë²„ë ˆì´
      leportsMarkers = [], // ë ˆí¬ì¸  ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
      leportsOverlay = [], // ë ˆí¬ì¸  ì˜¤ë²„ë ˆì´
      stayMarkers = [], // ìˆ™ë°• ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
      stayOverlay = [], // ìˆ™ë°• ì˜¤ë²„ë ˆì´
      shoppingMarkers = [], // ì‡¼í•‘ ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
      shoppingOverlay = [], // ì‡¼í•‘ ì˜¤ë²„ë ˆì´
      restaurantMarkers = [], // ìŒì‹ì  ë§ˆì»¤ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì„ ë°°ì—´ì…ë‹ˆë‹¤
      restaurantOverlay = []; // ìŒì‹ì  ì˜¤ë²„ë ˆì´


    createTourMarkers(); // ê´€ê´‘ì§€ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ê´€ê´‘ì§€ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
    createCultureMarkers(); // ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
    createFestivalMarkers(); // ì¶•ì œê³µì—° ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì¶•ì œê³µì—° ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
    createLeportsMarkers(); // ë ˆí¬ì¸  ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ë ˆí¬ì¸  ë§ˆì»¤ë¥¼ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.
    createStayMarkers(); // ìˆ™ë°• ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ìˆ™ë°• ë§ˆì»¤ë¥¼ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.
    createShoppingMarkers(); // ì‡¼í•‘ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì‡¼í•‘ ë§ˆì»¤ë¥¼ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.
    createRestaurantMarkers(); // ìŒì‹ì  ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ìŒì‹ì  ë§ˆì»¤ë¥¼ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.

    changeMarker('tour'); // ì§€ë„ì— ê´€ê´‘ì§€ ë§ˆì»¤ê°€ ë³´ì´ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
    // changeMarker('context.theme'); // ì§€ë„ì— ê´€ê´‘ì§€ ë§ˆì»¤ê°€ ë³´ì´ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤    


    // ë§ˆì»¤ì´ë¯¸ì§€ì˜ ì£¼ì†Œì™€, í¬ê¸°, ì˜µì…˜ìœ¼ë¡œ ë§ˆì»¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ì—¬ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createMarkerImage(src, size, options) {
      var markerImage = new kakao.maps.MarkerImage(src, size, options);
      return markerImage;
    }

    // ì¢Œí‘œì™€ ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ë°›ì•„ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ì—¬ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createMarker(position, image) {
      var marker = new kakao.maps.Marker({
        position: position,
        image: image
      });

      return marker;
    }

    // ê´€ê´‘ì§€ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ê´€ê´‘ì§€ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createTourMarkers() {

      for (var i = 0; i < tourPositions.length; i++) {

        // var imageSize = new kakao.maps.Size(22, 26),
        var imageSize = new kakao.maps.Size(50, 60),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(10, 0),
            spriteSize: new kakao.maps.Size(36, 98)
          };

        // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        // var markerImage = createMarkerImage(coffeemarkerImageSrc, imageSize, imageOptions),
        var markerImage = createMarkerImage(tourmarkerImageSrc, imageSize),
          marker = createMarker(tourPositions[i], markerImage);

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì— í‘œì¶œë  ë‚´ìš©ìœ¼ë¡œ HTML ë¬¸ìì—´ì´ë‚˜ document elementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
        var content = '<div class="customoverlay">' +
          '  <a href="https://api.visitkorea.or.kr/search/commonList.do" target="_blank">' +
          '    <span class="title">title</span>' +
          '  </a>' +
          '</div>';

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var customOverlay = new kakao.maps.CustomOverlay({
          map: map,
          position: tourPositions[i],
          content: content,
          yAnchor: 0.5
        });

        // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ê´€ê´‘ì§€ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        tourMarkers.push(marker);
        tourOverlay.push(customOverlay);
      }
    }

    // ê´€ê´‘ì§€ ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setTourMarkers(map) {
      for (var i = 0; i < tourMarkers.length; i++) {
        tourMarkers[i].setMap(map);
        tourOverlay[i].setMap(map);
      }
    }

    // ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createCultureMarkers() {

      for (var i = 0; i < culturePositions.length; i++) {

        var imageSize = new kakao.maps.Size(50, 60),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(10, 36),
            spriteSize: new kakao.maps.Size(36, 98)
          };

        // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var markerImage = createMarkerImage(culturemarkerImageSrc, imageSize),
          marker = createMarker(culturePositions[i], markerImage);

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì— í‘œì¶œë  ë‚´ìš©ìœ¼ë¡œ HTML ë¬¸ìì—´ì´ë‚˜ document elementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
        var content = '<div class="customoverlay">' +
          '  <a href="https://api.visitkorea.or.kr/search/commonList.do" target="_blank">' +
          '    <span class="title">title</span>' +
          '  </a>' +
          '</div>';

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var customOverlay = new kakao.maps.CustomOverlay({
          map: map,
          position: culturePositions[i],
          content: content,
          yAnchor: 0.5
        });

        // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        cultureMarkers.push(marker);
        cultureOverlay.push(customOverlay);
      }
    }

    // ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setCultureMarkers(map) {
      for (var i = 0; i < cultureMarkers.length; i++) {
        cultureMarkers[i].setMap(map);
        cultureOverlay[i].setMap(map);
      }
    }

    // ì¶•ì œê³µì—° ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì¶•ì œê³µì—° ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createFestivalMarkers() {

      for (var i = 0; i < festivalPositions.length; i++) {

        var imageSize = new kakao.maps.Size(50, 60),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(10, 72),
            spriteSize: new kakao.maps.Size(36, 98)
          };

        // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var markerImage = createMarkerImage(festivalmarkerImageSrc, imageSize),
          marker = createMarker(festivalPositions[i], markerImage);

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì— í‘œì¶œë  ë‚´ìš©ìœ¼ë¡œ HTML ë¬¸ìì—´ì´ë‚˜ document elementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
        var content = '<div class="customoverlay">' +
          '  <a href="https://api.visitkorea.or.kr/search/commonList.do" target="_blank">' +
          '    <span class="title">title</span>' +
          '  </a>' +
          '</div>';

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var customOverlay = new kakao.maps.CustomOverlay({
          map: map,
          position: festivalPositions[i],
          content: content,
          yAnchor: 0.5
        });

        // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ì¶•ì œê³µì—° ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        festivalMarkers.push(marker);
        festivalOverlay.push(customOverlay);
      }
    }

    // ì¶•ì œê³µì—° ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setFestivalMarkers(map) {
      for (var i = 0; i < festivalMarkers.length; i++) {
        festivalMarkers[i].setMap(map);
        festivalOverlay[i].setMap(map);
      }
    }

    // ë ˆí¬ì¸  ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ë ˆí¬ì¸  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createLeportsMarkers() {

      for (var i = 0; i < leportsPositions.length; i++) {

        var imageSize = new kakao.maps.Size(50, 60),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(10, 0),
            spriteSize: new kakao.maps.Size(36, 98)
          };

        // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var markerImage = createMarkerImage(leportsmarkerImageSrc, imageSize),
          marker = createMarker(leportsPositions[i], markerImage);

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì— í‘œì¶œë  ë‚´ìš©ìœ¼ë¡œ HTML ë¬¸ìì—´ì´ë‚˜ document elementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
        var content = '<div class="customoverlay">' +
          '  <a href="https://api.visitkorea.or.kr/search/commonList.do" target="_blank">' +
          '    <span class="title">title</span>' +
          '  </a>' +
          '</div>';

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var customOverlay = new kakao.maps.CustomOverlay({
          map: map,
          position: leportsPositions[i],
          content: content,
          yAnchor: 0.5
        });

        // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ë ˆí¬ì¸  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        leportsMarkers.push(marker);
        leportsOverlay.push(customOverlay);
      }
    }

    // ë ˆí¬ì¸  ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setLeportsMarkers(map) {
      for (var i = 0; i < leportsMarkers.length; i++) {
        leportsMarkers[i].setMap(map);
        leportsOverlay[i].setMap(map);
      }
    }

    // ìˆ™ë°• ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ìˆ™ë°• ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createStayMarkers() {

      for (var i = 0; i < stayPositions.length; i++) {

        var imageSize = new kakao.maps.Size(50, 60),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(10, 0),
            spriteSize: new kakao.maps.Size(36, 98)
          };

        // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var markerImage = createMarkerImage(staymarkerImageSrc, imageSize),
          marker = createMarker(stayPositions[i], markerImage);

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì— í‘œì¶œë  ë‚´ìš©ìœ¼ë¡œ HTML ë¬¸ìì—´ì´ë‚˜ document elementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
        var content = '<div class="customoverlay">' +
          '  <a href="https://api.visitkorea.or.kr/search/commonList.do" target="_blank">' +
          '    <span class="title">title</span>' +
          '  </a>' +
          '</div>';

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var customOverlay = new kakao.maps.CustomOverlay({
          map: map,
          position: stayPositions[i],
          content: content,
          yAnchor: 0.5
        });

        // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ìˆ™ë°• ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        stayMarkers.push(marker);
        stayOverlay.push(customOverlay);
      }
    }

    // ìˆ™ë°• ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setStayMarkers(map) {
      for (var i = 0; i < stayMarkers.length; i++) {
        stayMarkers[i].setMap(map);
        stayOverlay[i].setMap(map);
      }
    }

    // ì‡¼í•‘ ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì‡¼í•‘ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createShoppingMarkers() {

      for (var i = 0; i < shoppingPositions.length; i++) {

        var imageSize = new kakao.maps.Size(50, 60),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(10, 0),
            spriteSize: new kakao.maps.Size(36, 98)
          };

        // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var markerImage = createMarkerImage(shoppingmarkerImageSrc, imageSize),
          marker = createMarker(shoppingPositions[i], markerImage);

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì— í‘œì¶œë  ë‚´ìš©ìœ¼ë¡œ HTML ë¬¸ìì—´ì´ë‚˜ document elementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
        var content = '<div class="customoverlay">' +
          '  <a href="https://api.visitkorea.or.kr/search/commonList.do" target="_blank">' +
          '    <span class="title">title</span>' +
          '  </a>' +
          '</div>';

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var customOverlay = new kakao.maps.CustomOverlay({
          map: map,
          position: shoppingPositions[i],
          content: content,
          yAnchor: 0.5
        });

        // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ì‡¼í•‘ ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        shoppingMarkers.push(marker);
        shoppingOverlay.push(customOverlay);
      }
    }

    // ì‡¼í•‘ ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setShoppingMarkers(map) {
      for (var i = 0; i < shoppingMarkers.length; i++) {
        shoppingMarkers[i].setMap(map);
        shoppingOverlay[i].setMap(map);
      }
    }

    // ìŒì‹ì  ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ìŒì‹ì  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function createRestaurantMarkers() {

      for (var i = 0; i < restaurantPositions.length; i++) {

        var imageSize = new kakao.maps.Size(50, 60),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(10, 0),
            spriteSize: new kakao.maps.Size(36, 98)
          };

        // ë§ˆì»¤ì´ë¯¸ì§€ì™€ ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var markerImage = createMarkerImage(restaurantmarkerImageSrc, imageSize),
          marker = createMarker(restaurantPositions[i], markerImage);

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ì— í‘œì¶œë  ë‚´ìš©ìœ¼ë¡œ HTML ë¬¸ìì—´ì´ë‚˜ document elementê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
        var content = '<div class="customoverlay">' +
          '  <a href="https://api.visitkorea.or.kr/search/commonList.do" target="_blank">' +
          '    <span class="title">title</span>' +
          '  </a>' +
          '</div>';

        // ì»¤ìŠ¤í…€ ì˜¤ë²„ë ˆì´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var customOverlay = new kakao.maps.CustomOverlay({
          map: map,
          position: restaurantPositions[i],
          content: content,
          yAnchor: 0.5
        });

        // ìƒì„±ëœ ë§ˆì»¤ë¥¼ ìŒì‹ì  ë§ˆì»¤ ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤
        restaurantMarkers.push(marker);
        restaurantOverlay.push(customOverlay);
      }
    }

    // ìŒì‹ì  ë§ˆì»¤ë“¤ì˜ ì§€ë„ í‘œì‹œ ì—¬ë¶€ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
    function setRestaurantMarkers(map) {
      for (var i = 0; i < restaurantMarkers.length; i++) {
        restaurantMarkers[i].setMap(map);
        restaurantOverlay[i].setMap(map);
      }
    }
    // ì¹´í…Œê³ ë¦¬ë¥¼ í´ë¦­í–ˆì„ ë•Œ typeì— ë”°ë¼ ì¹´í…Œê³ ë¦¬ì˜ ìŠ¤íƒ€ì¼ê³¼ ì§€ë„ì— í‘œì‹œë˜ëŠ” ë§ˆì»¤ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤
    function changeMarker(type) {

      var tourMenu = document.getElementById('tourMenu');
      var cultureMenu = document.getElementById('cultureMenu');
      var festivalMenu = document.getElementById('festivalMenu');
      var leportsMenu = document.getElementById('leportsMenu');
      var stayMenu = document.getElementById('stayMenu');
      var shoppingMenu = document.getElementById('shoppingMenu');
      var restaurantMenu = document.getElementById('restaurantMenu');

      // ê´€ê´‘ì§€ ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ
      if (type === 'tour') {

        // ê´€ê´‘ì§€ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
        tourMenu.className = 'menu_selected';

        // ë¬¸í™”ì‹œì„¤ê³¼ ì¶•ì œê³µì—° ì¹´í…Œê³ ë¦¬ëŠ” ì„ íƒë˜ì§€ ì•Šì€ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤
        cultureMenu.className = '';
        festivalMenu.className = '';
        leportsMenu.className = '';
        stayMenu.className = '';
        shoppingMenu.className = '';
        restaurantMenu.className = '';

        // ê´€ê´‘ì§€ ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        setTourMarkers(map);
        setCultureMarkers(null);
        setFestivalMarkers(null);
        setLeportsMarkers(null);
        setStayMarkers(null);
        setShoppingMarkers(null);
        setRestaurantMarkers(null);

      } else if (type === 'culture') { // ë¬¸í™”ì‹œì„¤ ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

        // ë¬¸í™”ì‹œì„¤ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
        tourMenu.className = '';
        cultureMenu.className = 'menu_selected';
        festivalMenu.className = '';
        leportsMenu.className = '';
        stayMenu.className = '';
        shoppingMenu.className = '';
        restaurantMenu.className = '';

        // ë¬¸í™”ì‹œì„¤ ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        setTourMarkers(null);
        setCultureMarkers(map);
        setFestivalMarkers(null);
        setLeportsMarkers(null);
        setStayMarkers(null);
        setShoppingMarkers(null);
        setRestaurantMarkers(null);

      } else if (type === 'festival') { // ì¶•ì œê³µì—° ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

        // ì¶•ì œê³µì—° ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
        tourMenu.className = '';
        cultureMenu.className = '';
        festivalMenu.className = 'menu_selected';
        leportsMenu.className = '';
        stayMenu.className = '';
        shoppingMenu.className = '';
        restaurantMenu.className = '';

        // ì¶•ì œê³µì—° ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        setTourMarkers(null);
        setCultureMarkers(null);
        setFestivalMarkers(map);
        setLeportsMarkers(null);
        setStayMarkers(null);
        setShoppingMarkers(null);
        setRestaurantMarkers(null);

      } else if (type === 'leports') { // ë ˆí¬ì¸  ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

        // ë ˆí¬ì¸  ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
        tourMenu.className = '';
        cultureMenu.className = '';
        festivalMenu.className = '';
        leportsMenu.className = 'menu_selected';
        stayMenu.className = '';
        shoppingMenu.className = '';
        restaurantMenu.className = '';

        // ë ˆí¬ì¸  ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        setTourMarkers(null);
        setCultureMarkers(null);
        setFestivalMarkers(null);
        setLeportsMarkers(map);
        setStayMarkers(null);
        setShoppingMarkers(null);
        setRestaurantMarkers(null);

      } else if (type === 'stay') { // ìˆ™ë°• ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

        // ìˆ™ë°• ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
        tourMenu.className = '';
        cultureMenu.className = '';
        festivalMenu.className = '';
        leportsMenu.className = '';
        stayMenu.className = 'menu_selected';
        shoppingMenu.className = '';
        restaurantMenu.className = '';

        // ìˆ™ë°• ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        setTourMarkers(null);
        setCultureMarkers(null);
        setFestivalMarkers(null);
        setLeportsMarkers(null);
        setStayMarkers(map);
        setShoppingMarkers(null);
        setRestaurantMarkers(null);

      } else if (type === 'shopping') { // ì‡¼í•‘ ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

        // ì‡¼í•‘ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
        tourMenu.className = '';
        cultureMenu.className = '';
        festivalMenu.className = '';
        leportsMenu.className = '';
        stayMenu.className = '';
        shoppingMenu.className = 'menu_selected';
        restaurantMenu.className = '';

        // ì‡¼í•‘ ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        setTourMarkers(null);
        setCultureMarkers(null);
        setFestivalMarkers(null);
        setLeportsMarkers(null);
        setStayMarkers(null);
        setShoppingMarkers(map);
        setRestaurantMarkers(null);

      } else if (type === 'restaurant') { // ìŒì‹ì  ì¹´í…Œê³ ë¦¬ê°€ í´ë¦­ëì„ ë•Œ

        // ìŒì‹ì  ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒëœ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½í•˜ê³ 
        tourMenu.className = '';
        cultureMenu.className = '';
        festivalMenu.className = '';
        leportsMenu.className = '';
        stayMenu.className = '';
        shoppingMenu.className = '';
        restaurantMenu.className = 'menu_selected';

        // ìŒì‹ì  ë§ˆì»¤ë“¤ë§Œ ì§€ë„ì— í‘œì‹œí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        setTourMarkers(null);
        setCultureMarkers(null);
        setFestivalMarkers(null);
        setLeportsMarkers(null);
        setStayMarkers(null);
        setShoppingMarkers(null);
        setRestaurantMarkers(map);
      }
    }


    // ì§€ë„ì— í™•ëŒ€ ì¶•ì†Œ ì»¨íŠ¸ë¡¤ì„ ìƒì„±í•œë‹¤
    var zoomControl = new kakao.maps.ZoomControl();

    // ì§€ë„ì˜ ìš°ì¸¡ ì•„ë˜ì— í™•ëŒ€ ì¶•ì†Œ ì»¨íŠ¸ë¡¤ì„ ì¶”ê°€í•œë‹¤
    map.addControl(zoomControl, kakao.maps.ControlPosition.BOTTOMRIGHT);
  </script>


  <!-- <script src="static/js/map.js"></script> -->
</body>

</html>